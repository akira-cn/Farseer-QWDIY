<?doctype html>
<!DOCTYPE html>
<title>Script-based animation using requestAnimationFrame</title>
<style>
div { position: absolute; left: 10px; padding: 50px;
  background: crimson; color: white }
</style>
<script>
/*var requestId = 0;

function animate(time) {
  document.getElementById("animated").style.left =
    (time - animationStartTime) % 2000 / 4 + "px";
  requestId = window.webkitRequestAnimationFrame(animate);
}
function start() {
  animationStartTime = Date.now();
  requestId = window.webkitRequestAnimationFrame(animate);
}
function stop() {
  if (requestId)
    window.webkitCancelRequestAnimationFrame(requestId);
  requestId = 0;
}*/

var start = window.mozAnimationStartTime;
function step(event) {
  var progress = event.timeStamp - start;
  document.getElementById("animated").style.left = Math.min(progress/10, 200) + "px";
  if (progress < 2000) {
    window.mozRequestAnimationFrame();
  }
}
window.addEventListener("MozBeforePaint", step, false);
window.mozRequestAnimationFrame();
</script>
<button onclick="start()">Click me to start!</button>
<button onclick="stop()">Click me to stop!</button>
<div id="animated">Hello there.</div>